# v0.3 Beta Progress (Order + Position Flow)

Date: 2026-02-24

## Implemented

- Backend
  - Added `POST /v1/orders/:orderId/amend` (cancel + new wrapper).
  - Added strict validation for `LIMIT/STOP/STOP_MARKET` requirements in order placement and amend.
  - Added trigger mapping: `triggerPriceType -> workingType`.
  - Added partial TP/SL sizing support (`qty` or `percent`, `qty` takes precedence).
  - Added ops metrics counters:
    - `order_amend_total/success/fail`
    - `conditional_order_submit_total/success/fail`
  - Added amend failure-rate warning alert (`AMEND_ERROR_RATE_HIGH`).

- Frontend
  - Order panel supports `LIMIT/MARKET/STOP/STOP_MARKET` dynamic fields and validation.
  - Open orders now supports amend interaction and submit to `/v1/orders/:orderId/amend`.
  - TP/SL modal supports 25/50/75/100% shortcuts and custom qty.

## Regression Coverage Added

- Backend integration:
  - Conditional order validation matrix.
  - Amend success path (`cancel + new`).
  - Amend account-scope mismatch.
  - Disabled account amend denial (`INVALID_ACCOUNT`).
  - Amend metrics + alert assertions.
  - Attribution consistency after amend (fill still maps to original VP).

- Backend unit:
  - Metrics aggregation and alert coverage includes amend/conditional counters.

- Frontend:
  - Smoke test updated for ALL-view read-only hint.
  - Helper tests for:
    - Order type field matrix.
    - Amend payload composition.
    - TP/SL qty/percent normalization and boundary checks.

## Validation Snapshot

- `corepack pnpm lint` -> pass
- `corepack pnpm test` -> pass
  - backend: 26 passed
  - frontend: 8 passed
- `corepack pnpm build` -> pass

## Remaining Non-Code Gates

- Testnet staged replay (main + sub_a) with run evidence.
- Mainnet beta rollout windows (A/B/C stages) and rollback drill records.
